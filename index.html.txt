<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>CREX Agent</title>
</head>
<body>
    <div id="app"></div>
    <script>
        const routes = {
            "": "app.html",
            "signup": "signup.html",
            "login": "login.html",
            "search": "search.html",
        };

        function loadPage(path) {
            const targetRoute = routes[path] || "app.html";
            fetch(targetRoute)
                .then((response) => response.text())
                .then((html) => {
                    document.querySelector("#app").innerHTML = html;
                });
        }

        window.addEventListener("popstate", () => {
            const currentPath = window.location.pathname.replace("/", "");
            loadPage(currentPath);
        });

        document.addEventListener("click", (event) => {
            if (event.target.tagName === "A" && event.target.getAttribute("href").startsWith("/")) {
                event.preventDefault();
                const path = event.target.getAttribute("href").replace("/", "");
                window.history.pushState({}, "", event.target.href);
                loadPage(path);
            }
        });

        loadPage(window.location.pathname.replace("/", ""));
    </script>
</body>
</html>
